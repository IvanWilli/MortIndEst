date1 = 1986.9, date2 = 1999.9,
maternal = TRUE,
mac1 = 27.28, mac2 = 27.28,
mlt_data_input = standard_iusssp,
brass_logit = TRUE)
source("D:/Proyectos/UN_WPP/MortIndEst/R/siblings.R")
siblings_one(prop_not_dead,
age,
sex_siblings,
date,
mlt_data_input,
mlt_family,
brass_logit = FALSE,
brass_logit_e0 = 60,
brass_logit_5q0 = NULL)
prop_not_dead <- c(0.946425,0.943374,0.941222,0.935335,0.928475,0.882786,0.832533)
age <- seq(15, 45, 5)
sex_siblings <- "m"
date <- 2003.4
standard_iusssp <- c(-0.8899, -0.8600,-0.8202,-0.7801, -0.7371, -0.6902, -0.6345, -0.5682, -0.4824, -0.3737)
mlt_data_input <- data.frame(age = seq(15, 60, 5), lx = 1/(1+exp(2*standard_iusssp)))
mlt_data_input
mlt_family = "CD_West"
brass_logit <- FALSE
brass_logit_e0 <- 60
siblings_one(prop_not_dead,
age,
sex_siblings,
date,
mlt_data_input,
mlt_family,
brass_logit = FALSE,
brass_logit_e0 = 60,
brass_logit_5q0 = NULL)
siblings_one(prop_not_dead,
age,
sex_siblings,
date,
mlt_data_input,
mlt_family,
brass_logit = TRUE,
brass_logit_e0 = 60,
brass_logit_5q0 = NULL)
widowhood_one(prop_not_widowed,
age,
sex_spouse,
smam_f,
smam_m,
date,
mlt_family = "CD_West"
)
source("D:/Proyectos/UN_WPP/MortIndEst/R/widowhood.R")
prop_not_widowed <- c(0.9798, 0.9729, 0.9514, 0.9170, 0.8735, 0.8195, 0.7054, 0.6520)
age <- seq(20, 55, 5)
sex_spouse <- "m"
smam_f <- 23.2
smam_m <- 25.3
mlt_family <- "CD_West"
date <- 1975.6
HIV_prev <- NULL
mlt_data_input <- NULL
brass_logit <- FALSE
brass_logit_e0 <- 60
widowhood_one(prop_not_widowed,
age,
sex_spouse,
smam_f,
smam_m,
date,
mlt_family = "CD_West"
)
source("D:/Proyectos/UN_WPP/MortIndEst/R/aux_funs.R")
widowhood_one(prop_not_widowed,
age,
sex_spouse,
smam_f,
smam_m,
date,
mlt_family = "CD_West"
)
source("D:/Proyectos/UN_WPP/MortIndEst/R/intercensal_survival.R")
intercensal_survival(
c1 = c(90071,76598,63635,54431,45634,37818,32179,28724,23974,20618,15068,11999,10283,6737,5242,6756),
c2 = c(114017,106944,85253,73381,63010,50924,40885,36115,29409,25360,21775,17632,13004,10061,6690,9873),
date1 = "1960/12/11",
date2 = "1970/05/10",
age1 = seq(0,75,5),
age2 = seq(0,75,5),
sex = "f",
mlt_family = "West",
method = "match",
ages_fit = seq(0,75,5))
intercensal_survival(
c1 = c(90071,76598,63635,54431,45634,37818,32179,28724,23974,20618,15068,11999,10283,6737,5242,6756),
c2 = c(114017,106944,85253,73381,63010,50924,40885,36115,29409,25360,21775,17632,13004,10061,6690,9873),
date1 = "1960/12/11",
date2 = "1970/05/10",
age1 = seq(0,75,5),
age2 = seq(0,75,5),
sex = "f",
mlt_family = "CD_West",
method = "match",
ages_fit = seq(0,75,5))
install.packages("remotes")
install.packages("rstan", repos = c("https://mc-stan.org/r-packages/", getOption("repos")))
remotes::install_github("timriffe/DemoTools")
library(DemoTools)
intercensal_survival(
c1 = c(90071,76598,63635,54431,45634,37818,32179,28724,23974,20618,15068,11999,10283,6737,5242,6756),
c2 = c(114017,106944,85253,73381,63010,50924,40885,36115,29409,25360,21775,17632,13004,10061,6690,9873),
date1 = "1960/12/11",
date2 = "1970/05/10",
age1 = seq(0,75,5),
age2 = seq(0,75,5),
sex = "f",
mlt_family = "CD_West",
method = "match",
ages_fit = seq(0,75,5))
nMx <- c(0.13328, 0.01539, 0.0031, 0.00155, 0.00169, 0.00185, 0.00201,
0.0024, 0.00289, 0.00367, 0.00498, 0.00736, 0.01214, 0.02301, 0.0879)
Age <- c(0L, 1L, 5L, 10L, 15L, 20L, 25L, 30L, 35L, 40L, 45L, 50L, 55L, 60L, 65L)
fit_extrap_constr <- lt_extrap_constrained(nMx, Age, OAnew = 100, extrapLaw = "Gompertz")
source("D:/Proyectos/UN_WPP/MortIndEst/R/lt_extrap_constrained.R")
nMx <- c(0.13328, 0.01539, 0.0031, 0.00155, 0.00169, 0.00185, 0.00201,
0.0024, 0.00289, 0.00367, 0.00498, 0.00736, 0.01214, 0.02301, 0.0879)
Age <- c(0L, 1L, 5L, 10L, 15L, 20L, 25L, 30L, 35L, 40L, 45L, 50L, 55L, 60L, 65L)
fit_extrap_constr <- lt_extrap_constrained(nMx, Age, OAnew = 100, extrapLaw = "Gompertz")
fit_extrap_constr$ex[fit_extrap_constr$Age == 65] - (1/nMx[Age == 65])
fit_extrap_constr
fit_extrap_constr <- lt_extrap_constrained(nMx, Age, OAnew = 100, extrapLaw = "Kannisto")
fit_extrap_constr_Gomp <- lt_extrap_constrained(nMx, Age, OAnew = 100, extrapLaw = "Gompertz")
fit_extrap_constr_Kann <- lt_extrap_constrained(nMx, Age, OAnew = 100, extrapLaw = "Kannisto")
plot(fit_extrap_constr_Gomp$lt$Age, fit_extrap_constr_Gomp$lt$nMx, log = "y")
lines(fit_extrap_constr_Gomp$lt$Age, fit_extrap_constr_Kann$lt$nMx)
source("D:/Proyectos/UN_WPP/MortIndEst/R/census_method.R")
afg_males <- intercensal_surv_li_gerland(c(1087000,	415000,	545000), c(1326536,	566784,	687820),
c(60, 65, 70), "1972/10/16", "1981/1/3")
afg_males <- census_method(c(1087000,	415000,	545000), c(1326536,	566784,	687820),
c(60, 65, 70), "1972/10/16", "1981/1/3")
afg_males$q60_15
date <- 1997.79
standard_iusssp <- data.frame(age = seq(15, 85, 5),
lx = c(0.8868,0.8763,0.8621,0.8467,0.8296,0.8094,0.7845, 0.7527,0.7096,0.6515,0.5724,0.4700,0.3443,0.2101,0.0962))
orphanhood_one(prop_not_orphan = prop_not_orphan,
age = age,
mac = M,
date = date,
mlt_data_input = standard_iusssp,
brass_logit = TRUE)
# orhpanhood
prop_not_orphan <- c(0.9918,0.9819,0.9665,0.9415,0.9005,0.8374,0.7678,0.6380,0.4941)
maternal <- TRUE
age <- seq(5, 45, 5)
M <- 28.2807464
date <- 1997.79
standard_iusssp <- data.frame(age = seq(15, 85, 5),
lx = c(0.8868,0.8763,0.8621,0.8467,0.8296,0.8094,0.7845, 0.7527,0.7096,0.6515,0.5724,0.4700,0.3443,0.2101,0.0962))
orphanhood_one(prop_not_orphan = prop_not_orphan,
age = age,
mac = M,
date = date,
mlt_data_input = standard_iusssp,
brass_logit = TRUE)
publ_rr <- data.frame(
age = seq(15, 85, 5),
q15_45 = c(0.072, 0.085, 0.096, 0.110, 0.126, 0.143, 0.137, 0.159, 0.167),
Date     = c(1994.2, 1992.1, 1990.1, 1988.5, 1987.0, 1985.9, 1985.5, NA, NA))
publ_rr <- data.frame(
age = seq(5, 45, 5),
q15_45 = c(0.072, 0.085, 0.096, 0.110, 0.126, 0.143, 0.137, 0.159, 0.167),
Date     = c(1994.2, 1992.1, 1990.1, 1988.5, 1987.0, 1985.9, 1985.5, NA, NA))
publ_rr
irak_1997 <- orphanhood_one(prop_not_orphan = prop_not_orphan,
age = age,
mac = mac,
date = date,
mlt_data_input = standard_iusssp,
brass_logit = TRUE)
mac <- 28.2807464
date <- 1997.79
standard_iusssp <- data.frame(age = seq(15, 85, 5),
lx = c(0.8868,0.8763,0.8621,0.8467,0.8296,0.8094,0.7845, 0.7527,0.7096,0.6515,0.5724,0.4700,0.3443,0.2101,0.0962))
irak_1997 <- orphanhood_one(prop_not_orphan = prop_not_orphan,
age = age,
mac = mac,
date = date,
mlt_data_input = standard_iusssp,
brass_logit = TRUE)
publ_rr$q15_45-irak_1997$adult_mort_index$q15_45
round(publ_rr$q15_45-irak_1997$adult_mort_index$q15_45, 2)
round(publ_rr$q15_45-irak_1997$adult_mort_index$q15_45, 5)
round(publ_rr$q15_45-irak_1997$adult_mort_index$q15_45, 3)
# Orhpanhood 2
# Maternal orphanhood - Salomons 1987 - 1999 ("AM_Orphanhood_TwoCensus - Solomons_2.xlsx")
salomons_1987_1999 <- orphanhood_two(
prop1_not_orphan = c(0.9823 ,0.9660 ,0.9345 ,0.8760, 0.7910 ,0.6885 ,0.5712 ,0.4341, 0.2907),
prop2_not_orphan = c(0.9887 ,0.9756 ,0.9602 ,0.9251, 0.8766 ,0.7987 ,0.6988 ,0.5545, 0.4359),
age1 = seq(5, 45, 5), age2 = seq(5, 45, 5),
date1 = 1986.9, date2 = 1999.9,
maternal = TRUE,
mac1 = 27.28, mac2 = 27.28,
mlt_data_input = standard_iusssp,
brass_logit = TRUE)
salomons_1987_1999
# Orhpanhood 2
# Maternal orphanhood - Salomons 1987 - 1999 ("AM_Orphanhood_TwoCensus - Solomons_2.xlsx")
salomons_1987_1999 <- orphanhood_two(
prop1_not_orphan = c(0.9823 ,0.9660 ,0.9345 ,0.8760, 0.7910 ,0.6885 ,0.5712 ,0.4341, 0.2907),
prop2_not_orphan = c(0.9887 ,0.9756 ,0.9602 ,0.9251, 0.8766 ,0.7987 ,0.6988 ,0.5545, 0.4359),
age1 = seq(5, 45, 5), age2 = seq(5, 45, 5),
date1 = 1986.9, date2 = 1999.9,
maternal = TRUE,
mac1 = 27.28, mac2 = 27.28,
mlt_data_input = standard_iusssp,
brass_logit = F)
salomons_1986_1999_paternal <- orphanhood_two(
prop1_not_orphan = c(0.9644 ,0.9340 ,0.8862 ,0.8088 ,0.7060 ,0.5812 ,0.4620 ,0.3317),
prop2_not_orphan = c(0.9710 ,0.9454 ,0.9071 ,0.8493 ,0.7717 ,0.6568 ,0.5375 ,0.3891),
age1 = seq(5, 40, 5), age2 = seq(5, 40, 5),
date1 = 1986.9, date2 = 1999.9,
maternal = FALSE,
mac1 = 34.08, mac2 = 34.08,
mlt_data_input = standard_iusssp,
brass_logit = TRUE)$adult_mort
rr_45q15 <- c(0.175, 0.185,0.187,0.187)
round((salomons_1986_1999_paternal$q15_45/rr_45q15)-1,2)
# Salomona 1989 - 1999: http://demographicestimation.iussp.org/sites/demographicestimation.iussp.org/files/AM_Orphanhood_TwoCensus%20-%20Solomons_2.xlsx
# paternal
salomons_1986_1999_paternal <- orphanhood_two(
prop1_not_orphan = c(0.9644 ,0.9340 ,0.8862 ,0.8088 ,0.7060 ,0.5812 ,0.4620 ,0.3317),
prop2_not_orphan = c(0.9710 ,0.9454 ,0.9071 ,0.8493 ,0.7717 ,0.6568 ,0.5375 ,0.3891),
age1 = seq(5, 40, 5), age2 = seq(5, 40, 5),
date1 = 1986.9, date2 = 1999.9,
maternal = FALSE,
mac1 = 34.08, mac2 = 34.08,
mlt_data_input = standard_iusssp,
brass_logit = TRUE)$adult_mort
salomons_1986_1999_paternal$q15_45
# Kenya HIV 1999
# Orphanhood aids maternal
standard_iusssp_aids <- data.frame(age = seq(15, 85, 5),
lx = c(0.8847,0.8603, 0.8173,0.7677, 0.7247,0.6913, 0.6645,0.6281, 0.5783,0.5110, 0.4225,0.3149, 0.2012,0.1021, 0.0377))
kenya_1999_maternal_aids <- orphanhood_one(
prop_not_orphan = c(0.9732, 0.9560, 0.9336, 0.9080, 0.8771, 0.8244, 0.7691, 0.6685, 0.5653),
age = seq(5, 45, 5),
mac = 26.75048387,
maternal = TRUE,
date = 1999.64,
mlt_data_input = standard_iusssp_aids,
brass_logit = TRUE,
HIV_prev_antenatal = c(.07, .01, rep(0,7)),
HIV_vert_transm = 1/3,
HIV_fert_ratio = 3/4)$adult_mort_index
rr_45q15 <- c(0.368, 0.179, 0.183, 0.189, 0.183, 0.185, 0.165, 0.161, 0.139)
round((kenya_1999_maternal_aids$q15_45/rr_45q15)-1,2)
orphanhood_two(
prop1_not_orphan = c(.996,.9844,.9753,.9556,.9195,.8908,.8157,.7618,.6166),
prop2_not_orphan = c(.9949,.9903,.9794,.9608,.9316,.8967,.8450,.7746,.6781),
age1 = seq(0, 40, 5),
age2 = seq(0, 40, 5),
date1 = "1977-07-01",
date2 = "1980-05-11",
maternal = TRUE,
mac1 = 27,
mac2 = 27,
method = "preston_chen",
mlt_data_input = NULL,
mlt_family = "CD_West",
brass_logit = FALSE,
brass_logit_e0 = 60)
prop_not_dead <- c(0.9708,0.9447,0.9313,0.9180,0.9010,0.8748,0.8189)
age <- seq(15, 45, 5)
sex_siblings <- "f"
date <- 2003.4
standard_iusssp <- c(-0.8899, -0.8600,-0.8202,-0.7801, -0.7371, -0.6902, -0.6345, -0.5682, -0.4824, -0.3737)
mlt_data_input <- data.frame(age = seq(15, 60, 5), lx = 1/(1+exp(2*standard_iusssp)))
brass_logit <- TRUE
iussp_all_sisters <- siblings_one(prop_not_dead, age, sex_siblings, date, mlt_data_input, brass_logit = TRUE)
iussp_results <- c(0.411, 0.384, 0.345, 0.315, 0.301, 0.327)
round(iussp_all_sisters$adult_mort_index$q15_45 - iussp_results,3)
prop_not_dead <- c(0.946425,0.943374,0.941222,0.935335,0.928475,0.882786,0.832533)
age <- seq(15, 45, 5)
sex_siblings <- "m"
date <- 2003.4
standard_iusssp <- c(-0.8899, -0.8600,-0.8202,-0.7801, -0.7371, -0.6902, -0.6345, -0.5682, -0.4824, -0.3737)
mlt_data_input <- data.frame(age = seq(15, 60, 5), lx = 1/(1+exp(2*standard_iusssp)))
brass_logit <- TRUE
iussp_all_brothers <- siblings_one(prop_not_dead, age, sex_siblings, date, mlt_data_input, brass_logit = TRUE)
iussp_results <- c(0.417, 0.344, 0.288, 0.242, 0.285, 0.306)
round(iussp_all_brothers$adult_mort_index$q15_45 - iussp_results,3)
#' # Bangladesh 2003, all sisters. Example from IUSSP Manual.
prop_not_dead <- c(0.9708,0.9447,0.9313,0.9180,0.9010,0.8748,0.8189)
age <- seq(15, 45, 5)
sex_siblings <- "f"
date <- 2003.4
standard_iusssp <- c(-0.8899, -0.8600,-0.8202,-0.7801, -0.7371, -0.6902, -0.6345, -0.5682, -0.4824, -0.3737)
mlt_data_input <- data.frame(age = seq(15, 60, 5), lx = 1/(1+exp(2*standard_iusssp)))
brass_logit <- TRUE
iussp_all_sisters <- siblings_one(prop_not_dead, age, sex_siblings, date, mlt_data_input, brass_logit = TRUE)
iussp_results <- c(0.411, 0.384, 0.345, 0.315, 0.301, 0.327)
round(iussp_all_sisters$adult_mort_index$q15_45 - iussp_results,3)
manualX_bolivia_male <- widowhood_one(prop_not_widowed = c(0.9798, 0.9729, 0.9514, 0.9170, 0.8735, 0.8195, 0.7054, 0.6520),
age = seq(20, 55, 5),
sex_spouse = "m",
smam_f = 23.2 ,
smam_m = 25.3 ,
date = 1975.6,
mlt_family = "CD_West",
brass_logit = FALSE)
un_results_py_n <- c(.973, .956, .931, .894, .85, .798, .687, .638)
un_results_level <- c(14.3, 16.3, 16.6, 15.7, 15.4, 15.3, 13.3, 14.7)
round(unique(manualX_bolivia_male$lx_estimates$py_n) - un_results_py_n,3)
un_results_py_n
manualX_bolivia_male$lx_estimates$e0_interp
unique(manualX_bolivia_male$lx_estimates$e0_interp)
un_results_e0
un_results_level
un_results_e0 <- approx(13:17, c(47.082, 49.546, 51.816, 54.122, 56.45), un_results_level)$y
un_results_e0
round(unique(manualX_bolivia_male$lx_estimates$e0_interp) - un_results_e0,1) # ok with MORTPACK TOO
plot(manualX_bolivia_male$adult_mort_index$time_location, manualX_bolivia_male$adult_mort_index$q15_45)
un_results_py_n <- c(.973, .956, .931, .894, .85, .798, .687, .638)
un_results_level <- c(14.3, 16.3, 16.6, 15.7, 15.4, 15.3, 13.3, 14.7)
round(unique(manualX_bolivia_male$lx_estimates$py_n) - un_results_py_n,3)
manualX_bolivia_male$lx_estimates$py_n
unique(manualX_bolivia_male$lx_estimates$py_n)
un_results_py_n <- c(.956, .931, .894, .85, .798, .687, .638)
un_results_level <- c(16.3, 16.6, 15.7, 15.4, 15.3, 13.3, 14.7)
round(unique(manualX_bolivia_male$lx_estimates$py_n) - un_results_py_n,3)
un_results_e0 <- approx(13:17, c(47.082, 49.546, 51.816, 54.122, 56.45), un_results_level)$y
round(unique(manualX_bolivia_male$lx_estimates$e0_interp) - un_results_e0,1) # ok with MORTPACK TOO
unique(manualX_bolivia_male$lx_estimates$e0_interp)
un_results_e0
plot(manualX_bolivia_male$adult_mort_index$time_location, manualX_bolivia_male$adult_mort_index$q15_45)
# match: PANAMA 1960-1970 from UNX (Table 174)
panama_match <- intercensal_survival(
c1 = c(90071,76598,63635,54431,45634,37818,32179,28724,23974,20618,15068,11999,10283,6737,5242,6756),
c2 = c(114017,106944,85253,73381,63010,50924,40885,36115,29409,25360,21775,17632,13004,10061,6690,9873),
date1 = "1960/12/11",
date2 = "1970/05/10",
age1 = seq(0,75,5),
age2 = seq(0,75,5),
sex = "f",
mlt_family = "CD_West",
method = "match")
# in UNX removes outliers from ages 10, 20, 35, 55 and 65 (implying the use of the initial OAG)
# and get the mean 16.1 which is between 57.5 and 60 of e0.
# by default the function only removes age 10 because nSx and give a result a higher one.
# But is possible to reconstruct the result using the output where is found the best level for each age:
panama_match$rank_match %>% mutate(color = ifelse(age %in% c(10, 20, 35, 55, 65), "outlier", "used")) %>%
ggplot(aes(age, e0_interp, color=color)) + geom_point(size = 2)
panama_match$rank_match %>% filter(!age %in% c(10, 20, 35, 55, 65)) %>% summarise(mean(e0_interp))
# to replicate this during the process, parameters ages_fit or e0_range_accept should be used
intercensal_survival(
c1 = c(90071,76598,63635,54431,45634,37818,32179,28724,23974,20618,15068,11999,10283,6737,5242,6756),
c2 = c(114017,106944,85253,73381,63010,50924,40885,36115,29409,25360,21775,17632,13004,10061,6690,9873),
date1 = "1960/12/11",
date2 = "1970/05/10",
age1 = seq(0,75,5),
age2 = seq(0,75,5),
sex = "f",
mlt_family = "CD_West",
method = "match",
ages_fit = seq(0,75,5)[!seq(0,75,5) %in% c(10, 20, 35, 55, 65)])$selected_level
intercensal_survival(
c1 = c(90071,76598,63635,54431,45634,37818,32179,28724,23974,20618,15068,11999,10283,6737,5242,6756),
c2 = c(114017,106944,85253,73381,63010,50924,40885,36115,29409,25360,21775,17632,13004,10061,6690,9873),
date1 = "1960/12/11",
date2 = "1970/05/10",
age1 = seq(0,75,5),
age2 = seq(0,75,5),
sex = "f",
mlt_family = "CD_West",
method = "match",
ages_fit = seq(0,75,5)[!seq(0,75,5) %in% c(10, 20, 35, 55, 65)])
devtools::install_github("csgillespie/roxygen2Comment")
source("D:/Proyectos/UN_WPP/MortIndEst/R/census_method.R")
# Afghanistan males
afg_males <- intercensal_surv_li_gerland(c(1087000,	415000,	545000), c(1326536,	566784,	687820),
c(60, 65, 70), "1972/10/16", "1981/1/3")
afg_males$q60_15
# Afghanistan females
afg_females <- intercensal_surv_li_gerland(c(772000, 323000, 396000), c(929401, 435774, 487321),
c(60, 65, 70), "1972/10/16", "1981/1/3")
# Afghanistan males
afg_males <- census_method(c(1087000,	415000,	545000), c(1326536,	566784,	687820),
c(60, 65, 70), "1972/10/16", "1981/1/3")
afg_males$q60_15
# Afghanistan females
afg_females <- census_method(c(772000, 323000, 396000), c(929401, 435774, 487321),
c(60, 65, 70), "1972/10/16", "1981/1/3")
afg_females$q60_15
# Albanian males
alb_males <- census_method(c(1326536, 566784, 687820), c(1441428,848609,762845),
c(60, 65, 70), "1981/3/1", "1998/3/2")
alb_males$q60_15
# Albanian females
alb_females <- census_method(c(929401,435774,487321), c(1241433,698000,624473),
c(60, 65, 70), "1981/3/1", "1998/3/2")
alb_females$q60_15
# Afghanistan males
afg_males <- census_method(c(1087000,	415000,	545000), c(1326536,	566784,	687820),
c(60, 65, 70), "1972/10/16", "1981/1/3")
afg_males$q60_15
# Afghanistan females
afg_females <- census_method(c(772000, 323000, 396000), c(929401, 435774, 487321),
c(60, 65, 70), "1972/10/16", "1981/1/3")
afg_females$q60_15
# Afghanistan males
afg_males <- census_method(c(1087000,	415000,	545000),
c(1326536,	566784,	687820),
c(60, 65, 70), "1972/10/16", "1981/1/3")
# Afghanistan females
afg_females <- census_method(c(772000, 323000, 396000),
c(929401, 435774, 487321),
c(60, 65, 70), "1972/10/16", "1981/1/3")
c(afg_males$q60_15, afg_females$q60_15)
# Albanian males
alb_males <- census_method(c(1326536, 566784, 687820),
c(1441428,848609,762845),
c(60, 65, 70), "1981/3/1", "1998/3/2")
# Albanian females
alb_females <- census_method(c(929401,435774,487321),
c(1241433,698000,624473),
c(60, 65, 70), "1981/3/1", "1998/3/2")
c(alb_males$q60_15, alb_females$q60_15)
fit_extrap_constr$ex[fit_extrap_constr$Age == 65]
nMx <- c(0.13328, 0.01539, 0.0031, 0.00155, 0.00169, 0.00185, 0.00201,
0.0024, 0.00289, 0.00367, 0.00498, 0.00736, 0.01214, 0.02301, 0.0879)
Age <- c(0L, 1L, 5L, 10L, 15L, 20L, 25L, 30L, 35L, 40L, 45L, 50L, 55L, 60L, 65L)
fit_extrap_constr <- lt_extrap_constrained(nMx, Age, OAnew = 100, extrapLaw = "Gompertz")
fit_extrap_constr$ex[fit_extrap_constr$Age == 65] - (1/nMx[Age == 65])
fit_extrap_constr$ex[fit_extrap_constr$Age == 65]
nMx
fit_extrap_constr
fit_extrap_constr
fit_extrap_constr$ex[fit_extrap_constr$Age == 65]
fit_extrap_constr$ex[fit_extrap_constr$Age == 65]
fit_extrap_constr$ex
fit_extrap_constr
fit_extrap_constr <- lt_extrap_constrained(nMx, Age, OAnew = 100, extrapLaw = "Gompertz")$lt
fit_extrap_constr$ex[fit_extrap_constr$Age == 65] - (1/nMx[Age == 65])
fit_extrap_constr$ex[fit_extrap_constr$Age == 65]
# if some other value is required on e(65), like 10
nMx <- c(0.13328, 0.01539, 0.0031, 0.00155, 0.00169, 0.00185, 0.00201,
0.0024, 0.00289, 0.00367, 0.00498, 0.00736, 0.01214, 0.02301, 0.0879)
Age <- c(0L, 1L, 5L, 10L, 15L, 20L, 25L, 30L, 35L, 40L, 45L, 50L, 55L, 60L, 65L)
fit_extrap_constr <- lt_extrap_constrained(nMx, Age, OAnew = 100, extrapLaw = "Gompertz", eOAG = 10)
fit_extrap_constr$ex[fit_extrap_constr$Age == 65]
fit_extrap_constr <- lt_extrap_constrained(nMx, Age, OAnew = 100, extrapLaw = "Gompertz", eOAG = 10)$lt
fit_extrap_constr$ex[fit_extrap_constr$Age == 65] - 10
fit_extrap_constr$ex[fit_extrap_constr$Age == 65]
plot(fit_extrap_constr$nMx, log = "y")
load("modsr-vr-dhs-spectrum-25-04.rda")
getwd()
load("modsr-vr-dhs-spectrum-25-04.rdata")
View(mods.r)
load("modsr-vr-dhs-spectrum-25-04.rda")
load("data/modsr-vr-dhs-spectrum-25-04.rda")
library(devtools)
document()
usethis::use_data(modsr-vr-dhs-spectrum-25-04)
load_all()
document()
load("data/modsr-vr-dhs-spectrum-25-04.rda")
getwd()
load("data/modsr-vr-dhs-spectrum-25-04.rdata")
load("data/modsr-vr-dhs-spectrum-25-04.rda")
load("data/modsr-vr-dhs-spectrum-25-04.RData")
load("data/modsr-vr-dhs-spectrum-25-04.RData")
load("modsr-vr-dhs-spectrum-25-04.RData")
getwd()
getwd()
load("modsr-vr-dhs-spectrum-25-04.RData")
library(devtools)
usethis::use_data(mods.r)
load_all()
library(rms)
document()
usethis::use_pipe()
load_all()
document()
document()
document()
document()
load_all()
document()
load_all()
library(devtools)
document()
load_all()
document()
load_all()
usethis::use_pkgdown_github_pages()
document()
load_all()
usethis::use_article()
usethis::use_article(name = "Orphanhood.Rmd", title = "Orphanhood")
usethis::use_article(name = "Orphanhood.Rmd", title = "Siblings and Widowhood")
usethis::use_article(name = "Siblings_Widowhood.Rmd", title = "Siblings and Widowhood")
usethis::use_article(name = "ExtrapConstrained_CensusMethod.Rmd", title = "Constrained Extrapolation and Census Method")
usethis::use_article(name = "IntercensalSurvival.Rmd", title = "Intercensal survival methods")
This is a vignette about using ... methods with this package
?pkgdown::build_articles
pkgdown::build_articles()
source("~/.active-rstudio-document", echo = TRUE)
pkgdown::build_articles()
library(devtools)
document()
document()
load_all()
usethis::use_readme_rmd()
