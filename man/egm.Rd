% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/egm.R
\name{egm}
\alias{egm}
\title{Extinct Generation Method (EGM) from Lexis-square deaths}
\usage{
egm(y, x, d, yb = NULL, alpha = NULL)
}
\arguments{
\item{y}{Integer or numeric vector. Calendar year (Lexis square).}

\item{x}{Integer or numeric vector. Age (Lexis square).}

\item{d}{Numeric vector. Deaths in the Lexis square \eqn{(y, x)}.}

\item{yb}{Integer or numeric vector (optional). Year of birth (cohort).
If supplied, it must be the same length as \code{y}/\code{x}/\code{d} and
will be used directly (no triangle split). If \code{NULL}, \code{yb} is
derived from \code{y} and \code{x} using \code{alpha}.}

\item{alpha}{Numeric scalar in \eqn{[0, 1]} (optional). Upper triangle share
used to split Lexis squares when \code{yb} is \code{NULL}. Default is
\code{0.5}. Ignored when \code{yb} is provided.}
}
\value{
A data frame with one row per cohort–age–year of population stock at the beggining of the year:
\describe{
\item{yb}{Year of birth (cohort).}
\item{x}{Age (exact age on vertical segment).}
\item{y}{Calendar year corresponding to age \eqn{x}.}
\item{AgeDeath105}{Inform if max age with data is 105 or more. A flag for extinct interpretation.}
\item{pop}{Cohort population at exact age \eqn{x}, reconstructed by reverse
cumulative deaths.}
}
}
\description{
Compute cohort population counts (the extinct generation method) by
accumulating deaths along cohort lines in a Lexis diagram, locating estimates at
at the beginning of each year. Inputs are
calendar year \code{y}, age at the Lexis square \code{x}, and deaths
\code{d} in each square. Cohort (year of birth, \code{yb}) can be supplied
directly, or derived by splitting each Lexis square into upper/lower
triangles using \code{alpha}.
}
\details{
The extinct generation method reconstructs cohort population size at age
\eqn{x} as the (reverse) cumulative sum of cohort deaths from age \eqn{x}
onward.  Implementation note: this uses \code{dplyr::mutate(..., .by = yb)}, which
requires \strong{dplyr >= 1.1.0}.
}
\section{Assumptions}{

\itemize{
\item Death registration is complete for extinct (or nearly extinct) cohorts.
\item When \code{yb} is not provided, the within-square timing of deaths is
approximated by a constant split \code{alpha} between triangles.
}
}

